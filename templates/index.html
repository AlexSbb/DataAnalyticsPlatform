<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <title>MAIT 2019</title>
  </head>
  <body>

<header class="navbar fixed-top navbar-dark bg-dark"> 
    <a class="navbar-brand" href="#">
        <img src="../img/logo.svg"  width="90" height="60" alt="" >
    </a>
    <span class="navbar-brand mx-auto d-block text-center order-0 order-md-1 w-25">
       <h1 class="h1">Data Analytics Platform</h1> 
    </span>
</header>

<div class="container-fluid">
    
    <div class="row">

        <nav class="col-md-2 d-none d-md-block bg-light sidebar" style="padding-top: 90px;"> 
            <div class="bd-toc-item sidebar-sticky">
                <h5 class="border-bottom">Select dataset</h5>

                        <div class="input-group">
                            <select class="custom-select " id="selectDataSet" onchange="onChangeselectDataSet()">
                                <option selected>Choose dataset...</option>
                                <option value="1">One</option>
                                <option value="2">Two</option>
                                <option value="3">Three</option>
                              </select>

                              <div class="input-group-append">
                                <label class="btn btn-default btn-file">
                                    Import<input type="file"  id="ImportFile" style="display: none;"  onchange='onFilePicked(event)'>
                                    <!-- <span class="glyphicon glyphicon-plus"></span> -->
                                    <!-- <i class="glyphicon glyphicon-plus"></i> -->
                                    <!-- <span aria-hidden="true">&plus;</span> -->
                                </label> 
                              </div>
                        </div>



                <h5 class="border-bottom">Interpolation:</h5>

                <ul class="nav flex-column">
                    <li class="nav-item">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="HardLimit_deviation" id="exampleRadios1" value="option1" checked>
                            <label class="form-check-label" for="exampleRadios1">
                                Hard limit values
                            </label>
                          </div>
                          <!-- MinMax -->
                          <div class="input-group input-group-sm mb-3 ml-1">
                            <div class="input-group-prepend">
                              <span class="input-group-text">Min</span>
                            </div>
                            <input type="text" class="form-control" id='Intrp_Min' aria-label="Min Value">
                          </div>

                          <div class="input-group input-group-sm mb-3 ml-1">
                            <div class="input-group-prepend">
                              <span class="input-group-text">Max</span>
                            </div>
                            <input type="text" class="form-control" id='Intrp_Max' aria-label="Max Value">
                          </div>
                          <!--  -->



                          <div class="form-check">
                            <input class="form-check-input" type="radio" name="HardLimit_deviation" id="exampleRadios2" value="option2">
                            <label class="form-check-label" for="exampleRadios2">
                                Standart deviation
                            </label>
                          </div>

                         <!-- Standart deviation factor -->
                          <div class="input-group input-group-sm mb-3 ml-1">
                            <div class="input-group-prepend">
                              <span class="input-group-text">Std factor</span>
                            </div>
                            <input type="text" class="form-control" id='Std_factor' aria-label="Std factor" value="1">
                          </div>

                          <div class="form-check">
                            <input class="form-check-input" type="radio" name="Linear_quadratic" id="linear_radio" value="linear" checked>
                            <label class="form-check-label" for="linear_radio">
                                Linear
                            </label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="radio" name="Linear_quadratic" id="quadratic_radio" value="quadratic">
                            <label class="form-check-label" for="quadratic_radio">
                                Quadratic
                            </label>
                          </div>
                          
                            <div class="text-center">
                                <button type="submit" class="btn btn-outline-secondary">Culculate</button>
                           
                            </div>







                        
                    </li >
                    <!-- <li class="nav-item">
                        <button  type="button" class="btn btn-light" data-toggle="modal" data-target="#MeanStandartdeviation"> Mean & Standart deviation </button>
                    </li > -->
                </ul>

                <!-- <h5 class="border-bottom"> Interpolation:</h5>
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <button  type="button" class="btn btn-light" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample" aria-pressed="true"> Linear Interpolation </button>

                        <div class="collapse ml-3 border-left" id="collapseExample">
                            <div class="input-group input-group-sm mb-3 ml-1">
                                <div class="input-group-prepend">
                                  <span class="input-group-text">Min</span>
                                </div>
                                <input type="text" class="form-control" id='Intrp_Min' aria-label="Min Value">
                              </div>

                              <div class="input-group input-group-sm mb-3 ml-1">
                                <div class="input-group-prepend">
                                  <span class="input-group-text">Max</span>
                                </div>
                                <input type="text" class="form-control" id='Intrp_Max' aria-label="Max Value">
                              </div>
                              
                              <div class="input-group input-group-sm mb-3 ml-1">
                                <div class="input-group-prepend">
                                    <button type="button" class="btn btn-secondary" onclick="buttonInterpolationClick()">Submit</button>
                                </div>
                              </div>
                              
                              

                        </div>
                   
                   
                    </li >
                    <li class="nav-item">
                        <button  type="button" class="btn btn-light"> Quadratic interpolation </button>
                    </li >
                </ul> -->

                <h5 class="border-bottom"> Smoothing:</h5>
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="Smoothing" id="backward_radio" value="backward" checked>
                            <label class="form-check-label" for="backward_radio">
                                Backward
                            </label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="radio" name="Smoothing" id="forward_radio" value="forward">
                            <label class="form-check-label" for="forward_radio">
                                Forward
                            </label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="radio" name="Smoothing" id="fixed_radio" value="fixed">
                            <label class="form-check-label" for="fixed_radio">
                                Fixed
                            </label>
                          </div>
                          <div class="input-group input-group-sm mb-3 ml-1">
                            <div class="input-group-prepend">
                              <span class="input-group-text">Window</span>
                            </div>
                            <input type="text" class="form-control" id='Std_factor' aria-label="window" value="2">
                          </div>


                          <div class="text-center">
                            <button type="submit" class="btn btn-outline-secondary">Culculate</button>
                       
                        </div>


                    </li >
                </ul>

                <h5 class="border-bottom"> I/O Relationship models:</h5>
                <ul class="nav flex-column">
                    <!-- Neural Network -->
                    <li class="nav-item"> 


                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="NN_RF" id="neuralNet_radio" value="neuralNet" checked>
                            <label class="form-check-label" for="neuralNet_radio">
                                Neural Network
                            </label>
                        </div>
                        <!--Test Size  -->
                        <div class="input-group input-group-sm mb-3 ml-1">
                            <div class="input-group-prepend">
                              <span class="input-group-text">Test Size</span>
                            </div>
                            <input type="text" class="form-control" id='NN_testSize' aria-label="window" value="80%">
                        </div>

                        <div class="input-group input-group-sm mb-3 ml-1">
                            <select class="custom-select " id="NN_activFunction" onchange="onChangeNN_activFunction()">
                                <option selected>Choose Active Function</option>
                                <option value="1">One</option>
                                <option value="2">Two</option>
                                <option value="3">Three</option>
                              </select>
                        </div>

                        <div class="input-group input-group-sm mb-3 ml-1">
                            <select class="custom-select " id="NN_solverFunction" onchange="onChangeNN_solverFunction()">
                                <option selected>Choose Solver Function</option>
                                <option value="1">One</option>
                                <option value="2">Two</option>
                                <option value="3">Three</option>
                              </select>
                        </div>



                        <!--Hidden layers  -->
                        <div class="input-group input-group-sm mb-3 ml-1">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Hidden layers </span>
                            </div>
                            <input type="text" class="form-control" id='NN_layers' aria-label="window" value="1,2,3,3,2">
                        </div>

                        <!--Iterations -->
                        <div class="input-group input-group-sm mb-3 ml-1">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Iterations</span>
                            </div>
                            <input type="text" class="form-control" id='NN_iterations' aria-label="window" value="100">
                        </div>


                        <div class="form-check ml-1">
                            <input class="form-check-input" type="checkbox" value="" id="NN_Scaling">
                            <label class="form-check-label" for="NN_Scaling">
                              Scaling
                            </label>
                        </div>
                        
                    </li >
                    <!-- Random Fores -->
                    <li class="nav-item">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="NN_RF" id="ranromF_radio" value="randomForest">
                            <label class="form-check-label" for="ranromF_radio">
                                Random Fores
                            </label>
                        </div>        
                        <!--Iterations -->
                        <div class="input-group input-group-sm mb-3 ml-1">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Trees</span>
                            </div>
                            <input type="text" class="form-control" id='RF_trees' aria-label="Trees" value="5">


                            <div class="input-group-prepend">
                                <span class="input-group-text">Test size</span>
                            </div>
                            <input type="text" class="form-control" id='RF_trees' aria-label="Test size" value="80%">
                                             
                        </div>

                        <div class="form-check ml-1">
                            <input class="form-check-input" type="checkbox" value="" id="RF_useHistory">
                            <label class="form-check-label" for="RF_useHistory">
                              Use history
                            </label>
                        </div>

                        <div class="text-center">
                            <button type="submit" class="btn btn-outline-secondary">Culculate</button>                       
                        </div>





                    </li >
                </ul>

            </div>
        </nav>




        <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4" style="padding-top: 90px;">

            <div class="chartjs-size-monitor" style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;">
                <div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
                    <div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div>
                </div>
                <div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
                <div style="position:absolute;width:200%;height:200%;left:0; top:0"></div>
                </div>
            </div>

            <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                <h4 class="h4">Dashboard</h4>
            </div>
            <canvas id="myChart"  class="border-bottom"></canvas>
            <!-- <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea> -->



        </main>
    
    </div>
</div>

    

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.js"></script>
<script src="https://unpkg.com/papaparse@latest/papaparse.min.js"></script>

<script>
    
    // Import file, button action
    var onFilePicked = function(event) {
        var input = event.target;
        var file = input.files[0];
        console.log(file.name);
        ProcessFile(file);
        };
    
    // Process data from file
    function ProcessFile(file){
        Papa.parse(file, {
            config: {
                delimiter: ";",
                dynamicTyping: true,
                skipEmptyLines: true
            },
            complete: function(results) {
            console.log("Finished:", results.data);
            console.log("Arr:", results.data[0].length);

            // Rows to colums :( I  hate .csv
            correctResult =[]    //Array of vectors
            for (var index=0; index < results.data[0].length; ++index){
                var column= []
                for (var j in results.data){
                column.push(parseFloat(results.data[j][index]));
                };
                correctResult.push(column)
            }
            console.log("correctResult:", correctResult);
            postData = { 
                fileName: file.name,
                dataArray: correctResult
                };
            postDataToPython(postData)   // Go to send data to python
            }  
      
        });
    }

    async function postDataToPython(postdata){
        const posturl = 'http://127.0.0.1:5000/importDataFromFile';
        try {
                const response = await fetch(posturl, {
                method: 'POST', // или 'PUT'
                body: JSON.stringify(postdata), // данные могут быть 'строкой' или {объектом}!
                headers: {
                    'Content-Type': 'application/json'
                }
                });
                const json = await response.json();
                console.log('Успех:', JSON.stringify(json));
            } 
        catch (error) {
                console.error('Ошибка:', error);
            } 

    }   








     function addRowsToSelectDataset() {
         var selectDataSet = document.getElementById("selectDataSet");
         var option= document.createElement("option");
         
         option.textContent = 'newDataSet'
         selectDataSet.appendChild(option)
     };
    

     function onChangeselectDataSet(){
        addRowsToSelectDataset()
     };

</script>
    

  </body>
</html>